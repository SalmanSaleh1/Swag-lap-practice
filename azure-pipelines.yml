trigger:
  - main  # Trigger pipeline on changes to the "main" branch

pool:
  name: 'MyPool'  # Replace with your agent pool name

jobs:
  - job: RunRobotTests
    displayName: 'Run Robot Framework Tests'
    steps:
      # Step 1: Set up Python environment
      - task: UsePythonVersion@0
        inputs:
          versionSpec: '3.9'  # Specify the Python version
          addToPath: true
        displayName: 'Set up Python 3.9'

      # Step 2: Install dependencies
      - script: |
          python -m pip install --upgrade pip
          pip install robotframework
        displayName: 'Install Robot Framework'

      # Step 3: Run Robot Framework Tests
      - script: |
          echo "Running Robot Framework Tests"
          robot --randomize all --loglevel TRACE --outputdir results Tests/
        displayName: 'Run Robot Framework Tests'

      # Step 4: Publish Test Results
      - task: PublishTestResults@2
        inputs:
          testResultsFiles: '**/results/output.xml'
          testRunTitle: 'Robot Framework Test Run'
        condition: succeededOrFailed()
        displayName: 'Publish Test Results'
