trigger:
  - main  # Runs when changes are pushed to the "main" branch

pool:
  name: MyPool  # Use your self-hosted agent pool

steps:
  - script: |
      echo "Installing Python 3.9"
      choco install python --version 3.9 -y
    displayName: 'Install Python'

  - script: |
      python -m venv venv  # Create a virtual environment
      source venv/Scripts/activate  # Activate the virtual environment
      pip install pytest  # Install pytest
      pip install -r requirements.txt  # Install other dependencies
    displayName: 'Install Dependencies'

  - script: |
      source venv/Scripts/activate  # Ensure the virtual environment is activated
      pytest tests/  # Run tests
    displayName: 'Run Tests'
